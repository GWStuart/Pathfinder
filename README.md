# Pathfinder
A pathfined project using real world road data and written entierly in C. 

Program implements Dijkstra's Algorithm and A* search optimised to run efficiently on large real world road networks with tens of thousands of nodes.

See below an image of the programming loading Brisbane City road data.

<img width="400" alt="BrisbaneRoadVisualised" src="https://github.com/user-attachments/assets/44368ac8-3f35-45a4-8059-bc6f6abf538b" />

## Features
This project implements the following features:
- Geojson data parsing and cleaning (including road partitioning and neighbour parsing)
- Graphics rendering with SDL3
- Dynamic mouse panning and zooming
- Toggleable node visibility
- Efficient pathfinding using a binary heap implementation
- Animated search algorithms
- Smooth and responsive performance even on large road networks
- Command line parsing

## Compilation
Use the provided [Makefile](Makefile) however ensure that the following dependencies are satisffied:
- `pkg-config` (used by the Makefile to automatically pass c flags and linker flags)
- SDL3 + SDL_ttf (see [here](https://wiki.libsdl.org/SDL3/FrontPage))

## Usage
After building the program you should have a `vis` exectable file and the basic usage is as shown below,
```
./vis PathToDataFile
```
The `PathToDataFile` should be the name associated with the output files generated by `formatData.py` (**without including any file extensions**). To load Brisbane city data use `assets/data/BrisbaneCentre` which I have included already in this github repository. For more information on how to load your own custom road network see the end of this README.

Additional (optional) command line options:
- `-h <HEIGHT>` to specify screen height
- `-w <WIDTH>` to specify screen width
- `--alg <ALG>` to specify the pathfinding algorithm to be used. Can be either `dijkstra` (default) or `astar`

<br>

Most other features within the program itself are quite self explanatory but here is some additional detail:
- Pan around with the mouse and zoom with the scroll wheel
- Toggle node rendering with the `n` key
- Click to select the pathfinding start and end nodes
- Press space to then run the pathfinder

## Loading Other City Data
Within this github repository I already provide the processed data for the Brisbane City centre. To load this data use the following command,
```
./vis assets/data/BrisbaneCentre
```

To load your own custom road network you need to download OpenMap data for a particular region as a `.geojson` file. In OpenMaps the road data is stored under the `highway` key (although this also includes certain road types such as foot paths and crossings which you may want to filter out). 

The way I suggest downloading the data is using [QGIS](https://qgis.org) and the `QuickOSM` plugin.
1. Download QGIS and install the plugin `QuickOSM`
2. On the left pannel in QGIS expand the `XYZ Tiles` section which should reveal an item called `OpenStreetMap`
3. Drag and drop `OpenStreetMap` into the layers pannel in QGIS (you should now see a map in the main window).
4. Zoom into the area that you want to download.
5. To specify the exact region to download the best way is to make a layer for it. Go `layer -> Create Layer -> New Temporary Scratch Layer`. Choose "polygon" as the geometry type.
6. Then select the layer on the layers pannel and ensure that editing is toggled. When toggled you should see an option in the top bar to "add polygon".
7. Click on the add polygon and trace out the region to be downloaded. Simply click to add points to the polygon and right click when done.
8. After completing the region remember to toggle editing back off.
9. Then open up the QuickOSM window (its icon is a magnifying glass on a green background).
10. Choose "QuickQuery" and under the key type `highway`. Then choose `Layer Extent` for the download region and specify the scratch layer that you created.
11. Then press "runQuery" and wait for it to complete.
12. You can now untoggle most layers apart from the highway data.
13. The highway data can contain features that you may not be interested in and so these can be filtered out. Right click on the layer and press filter. See the filter that I use personally below which you can paste directly into QGIS.
14. Right click on the layer and export to save. Save it as a GeoJSON file.
15. The GeoJSON file then needs to be preprocessed using `formatData.py` file. To do this use the following command: `python formatData.py PATH_TO_GEOJSON_FILE`
16. Assuming that this runs successfully you should now have `.nodes`, `.roads` and `.edges` files.
17. This is now ready to be loaded in with `./vis`

Custom QGIS highway filter that I use:
```
NOT "highway" = 'pedestrian' AND
NOT "highway" = 'footway' AND
NOT "highway" = 'steps' AND
NOT "highway" = 'tertiary_link' AND
NOT "highway" = 'crossing' AND
NOT "highway" = 'corridor'
```
